# N x N çš„æ£‹ç›˜ board ä¸Šï¼ŒæŒ‰ä» 1 åˆ° N*N çš„æ•°å­—ç»™æ–¹æ ¼ç¼–å·ï¼Œç¼–å· ä»å·¦ä¸‹è§’å¼€å§‹ï¼Œæ¯ä¸€è¡Œäº¤æ›¿æ–¹å‘ã€‚ 
# 
#  ä¾‹å¦‚ï¼Œä¸€å— 6 x 6 å¤§å°çš„æ£‹ç›˜ï¼Œç¼–å·å¦‚ä¸‹ï¼š 
# 
#  
#  
# 
#  r è¡Œ c åˆ—çš„æ£‹ç›˜ï¼ŒæŒ‰å‰è¿°æ–¹æ³•ç¼–å·ï¼Œæ£‹ç›˜æ ¼ä¸­å¯èƒ½å­˜åœ¨ â€œè›‡â€ æˆ– â€œæ¢¯å­â€ï¼›å¦‚æœ board[r][c] != -1ï¼Œé‚£ä¸ªè›‡æˆ–æ¢¯å­çš„ç›®çš„åœ°å°†ä¼šæ˜¯ boa
# rd[r][c]ã€‚ 
# 
#  ç©å®¶ä»æ£‹ç›˜ä¸Šçš„æ–¹æ ¼ 1 ï¼ˆæ€»æ˜¯åœ¨æœ€åä¸€è¡Œã€ç¬¬ä¸€åˆ—ï¼‰å¼€å§‹å‡ºå‘ã€‚ 
# 
#  æ¯ä¸€å›åˆï¼Œç©å®¶éœ€è¦ä»å½“å‰æ–¹æ ¼ x å¼€å§‹å‡ºå‘ï¼ŒæŒ‰ä¸‹è¿°è¦æ±‚å‰è¿›ï¼š 
# 
#  
#  é€‰å®šç›®æ ‡æ–¹æ ¼ï¼šé€‰æ‹©ä»ç¼–å· x+1ï¼Œx+2ï¼Œx+3ï¼Œx+4ï¼Œx+5ï¼Œæˆ–è€… x+6 çš„æ–¹æ ¼ä¸­é€‰å‡ºä¸€ä¸ªç›®æ ‡æ–¹æ ¼ s ï¼Œç›®æ ‡æ–¹æ ¼çš„ç¼–å· <= N*Nã€‚
# 
#  
#  è¯¥é€‰æ‹©æ¨¡æ‹Ÿäº†æ·éª°å­çš„æƒ…æ™¯ï¼Œæ— è®ºæ£‹ç›˜å¤§å°å¦‚ä½•ï¼Œä½ çš„ç›®çš„åœ°èŒƒå›´ä¹Ÿåªèƒ½å¤„äºåŒºé—´ [x+1, x+6] ä¹‹é—´ã€‚ 
#  
#  
#  ä¼ é€ç©å®¶ï¼šå¦‚æœç›®æ ‡æ–¹æ ¼ S å¤„å­˜åœ¨è›‡æˆ–æ¢¯å­ï¼Œé‚£ä¹ˆç©å®¶ä¼šä¼ é€åˆ°è›‡æˆ–æ¢¯å­çš„ç›®çš„åœ°ã€‚å¦åˆ™ï¼Œç©å®¶ä¼ é€åˆ°ç›®æ ‡æ–¹æ ¼ Sã€‚ 
#  
# 
#  æ³¨æ„ï¼Œç©å®¶åœ¨æ¯å›åˆçš„å‰è¿›è¿‡ç¨‹ä¸­æœ€å¤šåªèƒ½çˆ¬è¿‡è›‡æˆ–æ¢¯å­ä¸€æ¬¡ï¼šå°±ç®—ç›®çš„åœ°æ˜¯å¦ä¸€æ¡è›‡æˆ–æ¢¯å­çš„èµ·ç‚¹ï¼Œä½ ä¹Ÿä¸ä¼šç»§ç»­ç§»åŠ¨ã€‚ 
# 
#  è¿”å›è¾¾åˆ°æ–¹æ ¼ N*N æ‰€éœ€çš„æœ€å°‘ç§»åŠ¨æ¬¡æ•°ï¼Œå¦‚æœä¸å¯èƒ½ï¼Œåˆ™è¿”å› -1ã€‚ 
# 
#  
# 
#  ç¤ºä¾‹ï¼š 
# 
#  è¾“å…¥ï¼š[
# [-1,-1,-1,-1,-1,-1],
# [-1,-1,-1,-1,-1,-1],
# [-1,-1,-1,-1,-1,-1],
# [-1,35,-1,-1,13,-1],
# [-1,-1,-1,-1,-1,-1],
# [-1,15,-1,-1,-1,-1]]
# è¾“å‡ºï¼š4
# è§£é‡Šï¼š
# é¦–å…ˆï¼Œä»æ–¹æ ¼ 1 [ç¬¬ 5 è¡Œï¼Œç¬¬ 0 åˆ—] å¼€å§‹ã€‚
# ä½ å†³å®šç§»åŠ¨åˆ°æ–¹æ ¼ 2ï¼Œå¹¶å¿…é¡»çˆ¬è¿‡æ¢¯å­ç§»åŠ¨åˆ°åˆ°æ–¹æ ¼ 15ã€‚
# ç„¶åä½ å†³å®šç§»åŠ¨åˆ°æ–¹æ ¼ 17 [ç¬¬ 3 è¡Œï¼Œç¬¬ 5 åˆ—]ï¼Œå¿…é¡»çˆ¬è¿‡è›‡åˆ°æ–¹æ ¼ 13ã€‚
# ç„¶åä½ å†³å®šç§»åŠ¨åˆ°æ–¹æ ¼ 14ï¼Œä¸”å¿…é¡»é€šè¿‡æ¢¯å­ç§»åŠ¨åˆ°æ–¹æ ¼ 35ã€‚
# ç„¶åä½ å†³å®šç§»åŠ¨åˆ°æ–¹æ ¼ 36, æ¸¸æˆç»“æŸã€‚
# å¯ä»¥è¯æ˜ä½ éœ€è¦è‡³å°‘ 4 æ¬¡ç§»åŠ¨æ‰èƒ½åˆ°è¾¾ç¬¬ N*N ä¸ªæ–¹æ ¼ï¼Œæ‰€ä»¥ç­”æ¡ˆæ˜¯ 4ã€‚
#  
# 
#  
# 
#  æç¤ºï¼š 
# 
#  
#  2 <= board.length = board[0].length <= 20 
#  board[i][j] ä»‹äº 1 å’Œ N*N ä¹‹é—´æˆ–è€…ç­‰äº -1ã€‚ 
#  ç¼–å·ä¸º 1 çš„æ–¹æ ¼ä¸Šæ²¡æœ‰è›‡æˆ–æ¢¯å­ã€‚ 
#  ç¼–å·ä¸º N*N çš„æ–¹æ ¼ä¸Šæ²¡æœ‰è›‡æˆ–æ¢¯å­ã€‚ 
#  
#  Related Topics å¹¿åº¦ä¼˜å…ˆæœç´¢ æ•°ç»„ çŸ©é˜µ 
#  ğŸ‘ 71 ğŸ‘ 0

from typing import List
import collections
# leetcode submit region begin(Prohibit modification and deletion)
class Solution:
    def snakesAndLadders(self, board: List[List[int]]) -> int:
        def id2rc(val):
            r, c = (val - 1) // n, (val - 1) % n
            if r % 2 == 1:
                c = n - 1 - c
            return n - 1 - r, c
        n = len(board)
        vis = set()
        q = collections.deque([(1, 0)])
        while q:
            idx, step = q.popleft()
            for i in range(1, 6 + 1):
                idx_nxt = idx + i
                if idx_nxt > n * n: break
                x_nxt, y_nxt = id2rc(idx_nxt)
                if board[x_nxt][y_nxt] != -1:
                    idx_nxt = board[x_nxt][y_nxt]
                if idx_nxt == n * n:
                    return step + 1
                if idx_nxt not in vis:
                    vis.add(idx_nxt)
                    q.append((idx_nxt, step + 1))
        return -1
# leetcode submit region end(Prohibit modification and deletion)
board = [[-1,-1,-1,46,47,-1,-1,-1],
         [51,-1,-1,63,-1,31,21,-1],
         [-1,-1,26,-1,-1,38,-1,-1],
         [-1,-1,11,-1,14,23,56,57],
         [11,-1,-1,-1,49,36,-1,48],
         [-1,-1,-1,33,56,-1,57,21],
         [-1,-1,-1,-1,-1,-1,2,-1],
         [-1,-1,-1,8,3,-1,6,56]]
board = [[-1,-1,16,6,-1],
         [-1,9,25,8,-1],
         [8,20,2,7,-1],
         [-1,-1,12,-1,-1],
         [-1,-1,-1,12,23]]
print(Solution().snakesAndLadders(board))