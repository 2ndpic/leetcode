# å¯¹äºç»™å®šçš„æ•´æ•° n, å¦‚æœnçš„kï¼ˆk>=2ï¼‰è¿›åˆ¶æ•°çš„æ‰€æœ‰æ•°ä½å…¨ä¸º1ï¼Œåˆ™ç§° kï¼ˆk>=2ï¼‰æ˜¯ n çš„ä¸€ä¸ªå¥½è¿›åˆ¶ã€‚ 
# 
#  ä»¥å­—ç¬¦ä¸²çš„å½¢å¼ç»™å‡º n, ä»¥å­—ç¬¦ä¸²çš„å½¢å¼è¿”å› n çš„æœ€å°å¥½è¿›åˆ¶ã€‚ 
# 
#  
# 
#  ç¤ºä¾‹ 1ï¼š 
# 
#  
# è¾“å…¥ï¼š"13"
# è¾“å‡ºï¼š"3"
# è§£é‡Šï¼š13 çš„ 3 è¿›åˆ¶æ˜¯ 111ã€‚
#  
# 
#  ç¤ºä¾‹ 2ï¼š 
# 
#  
# è¾“å…¥ï¼š"4681"
# è¾“å‡ºï¼š"8"
# è§£é‡Šï¼š4681 çš„ 8 è¿›åˆ¶æ˜¯ 11111ã€‚
#  
# 
#  ç¤ºä¾‹ 3ï¼š 
# 
#  
# è¾“å…¥ï¼š"1000000000000000000"
# è¾“å‡ºï¼š"999999999999999999"
# è§£é‡Šï¼š1000000000000000000 çš„ 999999999999999999 è¿›åˆ¶æ˜¯ 11ã€‚
#  
# 
#  
# 
#  æç¤ºï¼š 
# 
#  
#  nçš„å–å€¼èŒƒå›´æ˜¯ [3, 10^18]ã€‚ 
#  è¾“å…¥æ€»æ˜¯æœ‰æ•ˆä¸”æ²¡æœ‰å‰å¯¼ 0ã€‚ 
#  
# 
#  
#  Related Topics æ•°å­¦ äºŒåˆ†æŸ¥æ‰¾ 
#  ğŸ‘ 107 ğŸ‘ 0


# leetcode submit region begin(Prohibit modification and deletion)
class Solution:
    def smallestGoodBase(self, n: str) -> str:
        """
        è®¾è¿›åˆ¶æ•°ä¸ºkï¼Œæ•°ä½ä¸ºs + 1ï¼Œé‚£ä¹ˆæœ‰sè¶Šå¤§ï¼Œkè¶Šå°çš„åæ¯”å…³ç³»
        å› ä¸ºn>=3ï¼Œæ‰€ä»¥æ•°ä½å¿…å¤§äºç­‰äº2ï¼Œå½“æ•°ä¸ºä¸º2æ—¶ï¼Œk ** 1 + k **0 = n,k=n-1
        å› ä¸ºk<=10 ** 18,æ•°ä¸ºæœ€å¤šä¸ºï¼ˆkæœ€å°ä¸º2ï¼‰log2(10 ** 18)= 59
        å‡è®¾æ­£æ•´æ•°nåœ¨kè¿›åˆ¶ä¸‹çš„æ‰€æœ‰æ•°ä½éƒ½ä¸º1ï¼Œä¸”ä½æ•°ä¸ºs + 1,é‚£ä¹ˆæœ‰
        k ** s + k ** (s - 1) + ... + k ** 1 + k ** 0 = n
        å¿…ç„¶æœ‰ k**s < n
        æ ¹æ®äºŒé¡¹å¼å®šç†
        (k + 1) ** s = k ** s + C(s, 1)k**(s - 1) +...+ C(S, S-1)k + 1 > n
        æœ‰ k ** s < n < (k + 1) ** s --> k < n ** (1 / s) < k + 1
        å› ä¸º s + 1 == æ•°ä½ï¼Œå·²çŸ¥æ•°ä½çš„ä¸Šé™æ˜¯59ï¼Œ ä¸‹çº¿æ˜¯2ï¼Œæ‰€ä»¥åªç”¨æšä¸¾så³å¯
        æ•°ä½è¶Šå¤§ï¼Œkè¶Šå°ï¼Œæ‰€ä»¥å°†æ•°ä½ä»å¤§åˆ°å°æšä¸¾
        """
        n = int(n)
        ans = n - 1
        for s in range(59, 1, -1):
            k = int(n ** (1 / s))
            if k > 1:
                tmp, mul = 1, 1
                for _ in range(s):
                    mul *= k
                    tmp += mul
                if tmp == n:
                    ans = k
                    break
        return str(ans)
# leetcode submit region end(Prohibit modification and deletion)
n = "13"
print(Solution().smallestGoodBase(n))